<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <!-- Draggable Topbar -->
    <link href="css/title-bar.css" rel="stylesheet">


</head>

<body>
    <div class="container-xxl position-relative bg-white d-flex p-0">
        <!-- Sidebar Start -->
        <div class="sidebar pe-4 pb-3">
            <nav class="navbar bg-light navbar-light">
                <div class="d-flex align-items-center ms-4 mb-4">
                    <div class="position-relative">
                        <img class="rounded-circle" src="../assets/avatar1.png" alt=""
                            style="width: 40px; height: 40px;">
                    </div>
                    <div class="m-3">
                        <h6 id="username" class="mb-0">dev</h6>
                    </div>
                </div>
                <div class="navbar-nav w-100">
                    <a href="index.html" class="nav-item nav-link active"><i
                            class="fa fa-tachometer-alt me-2"></i>Dashboard</a>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i
                                class="fa fa-cog me-2"></i>Ajustes</a>
                        <div class="dropdown-menu bg-transparent border-0">
                            <a href="pref.html" class="dropdown-item">Preferencias</a>
                            <a href="changeuser.html" class="dropdown-item">Cambiar usuario</a>
                            <a href="newuser.html" class="dropdown-item">Registrar usuario</a>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
        <!-- Sidebar End -->

        <!-- Content Start -->
        <div class="content text-center">
            <!-- Topbar -->
            <nav id="title-bar" class="navbar">
                <div class="ms-auto m-3">
                    <button type="button" id="close-but" class="btn-close"></button>
                </div>
            </nav>
            <!-- End Topbar -->

            <h2>Nuevo usuario</h2>
            <form id="form" class="m-4">
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" name="floatingUser" placeholder="Usuario" required>
                    <label for="floatingUser">Nombre</label>
                </div>
                <div class="row g-2 mb-3">
                    <div class="col-md">
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" name="floatingEmail"
                                placeholder="name@example.com">
                            <label for="floatingEmail">Correo electrónico</label>
                        </div>
                    </div>
                    <div class="col-md">
                        <div class="form-floating mb-3">
                            <input type="tel" class="form-control" name="floatingNumber" pattern="[0-9]{9}" required>
                            <label for="floatingInput">Número de teléfono</label>
                        </div>
                    </div>

                </div>
                <div class="row g-2">
                    <div class="col-md">
                        <div class="form-floating mb-3">
                            <input type="number" class="form-control" name="floatingAge" placeholder="Edad"
                                pattern="[0-9]{3}" required>
                            <label for="floatingAge">Edad</label>
                        </div>
                        <div class="form-floating mb-3">
                            <select class="form-select" name="floatingGender" aria-label="Genero">
                                <option value="Hombre">Hombre</option>
                                <option value="Mujer">Mujer</option>
                            </select>
                            <label for="floatingGender">Género</label>
                        </div>
                    </div>
                    <!-- Avatar -->
                    <div class="col-md ms-5 me-5">
                        <img class="w-25 me-5 rounded-circle" src="../assets/avatar1.png">
                        <button id="avt-but" class="w-10 m-2 btn btn-lg btn-secondary" type="button">Tomar foto</button>
                    </div>

                    <hr />

                    <h5>Persona de contacto</h5>
                    <div class="row g-2">
                        <div class="col-md">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" name="floatingUser" placeholder="Usuario"
                                    required>
                                <label for="floatingUser">Nombre</label>
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="col-md">
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" name="floatingEmail"
                                        placeholder="name@example.com">
                                    <label for="floatingEmail">Correo electrónico</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row g-2 mb-3">
                        <div class="col-md">
                            <div class="form-floating mb-3">
                                <input type="tel" class="form-control" name="floatingNumber" pattern="[0-9]{9}"
                                    required>
                                <label for="floatingInput">Número de teléfono</label>
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="form-floating mb-3">
                                <select class="form-select" name="floatingGender" aria-label="Genero">
                                    <option value="Hombre">Hijo/a</option>
                                    <option value="Mujer">Nieto/a</option>
                                    <option value="Mujer">Sobrino/a</option>
                                    <option value="Mujer">Hermano/a</option>
                                    <option value="Mujer">Primo/a</option>
                                    <option value="Mujer">Padre/madre</option>
                                </select>
                                <label for="floatingGender">Parentesco</label>
                            </div>
                        </div>

                    </div>

                    <hr />
                    <div class="checkbox mb-3">
                        <label>
                            <input type="checkbox" value="remember-me" required>
                            Acepto el uso continuado y en segundo plano de la cámara
                        </label>
                    </div>

                    <button id="reg-but" class="w-auto btn btn-lg btn-primary" type="button" data-toggle="modal"
                        data-target="modalSheet">Registrarse</button>
            </form>

            <!-- Modal usuario creado -->
            <div class="modal fade" id="confirm" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="text-center m-3">
                            <h3 class="modal-title text-center id=" exampleModalLabel">Usuario creado</h3>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Foto -->
            <div class="modal fade" id="photo" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div id="photo-frame"></div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" data-dismiss="modal">Patata!</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Content End -->
    </div>

    <script>
        //var WebCamera = require("webcamjs");

        document.getElementById("reg-but").addEventListener('click', () => {
            var values = {}
            var data = new FormData(document.getElementById('form'))
            for (var pair of data.entries()) {
                values[pair[0]] = pair[1]
            }
            window.dataAPI.newUser(values)
            $('#confirm').modal('show')
        })

        document.getElementById("avt-but").addEventListener('click', function () {
            //WebCamera.attach('#photo-frame');
            $('#photo').modal('show')
        });
    </script>

    <script src="js/title-bar.js"></script>
    <script src="js/jquery-3.6.3.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <!-- JavaScript Libraries -->
</body>

</html>